function phAppendContainerRequest(){0===jQuery("#phContainerRequest").length&&jQuery("body").append('<div id="phContainerRequest"></div>')}function phAppendContainerRequestQickView(){0===jQuery("#phContainerRequestQuickView").length&&jQuery("body").append('<div id="phContainerRequestQuickView"></div>')}function phDoRequestSuccess(e,t){if("cart"==t.type){if(jQuery(t.class).html(e.item),jQuery(t.class+"Count").html(e.count),jQuery(t.class+"Total").html(e.total),1==t.pos){var o=phAddSuffixToUrl(window.location.href,"format=raw"),r=phPosCurrentData("main.input");phDoSubmitFormUpdateInputBox(r,o),jQuery(".ph-pos-message-box").html(e.message),phPosManagePage()}2==t.method&&(phAppendContainerRequest(),jQuery("#phContainerRequest").html(e.popup),jQuery("#phAddToCartPopup").modal()),1==t.method&&1==t.view&&(startFullOverlay(1),setTimeout(function(){location.reload()},1))}else"compare"==t.type?(jQuery(".phItemCompareBox").html(e.item),jQuery(".phItemCompareBoxCount").html(e.count),2==t.method&&(phAppendContainerRequest(),jQuery("#phContainerRequest").html(e.popup),"add"==t.task?jQuery("#phAddToComparePopup").modal():"remove"==t.task&&jQuery("#phRemoveFromComparePopup").modal()),1==t.method&&1==t.view&&(startFullOverlay(1),setTimeout(function(){location.reload()},1))):"wishlist"==t.type?(jQuery(".phItemWishListBox").html(e.item),jQuery(".phItemWishListBoxCount").html(e.count),2==t.method&&(phAppendContainerRequest(),jQuery("#phContainerRequest").html(e.popup),"add"==t.task?jQuery("#phAddToWishListPopup").modal():"remove"==t.task&&jQuery("#phRemoveFromWishListPopup").modal()),1==t.method&&1==t.view&&(startFullOverlay(1),setTimeout(function(){location.reload()},1))):"quickview"==t.type?(jQuery(".phjItemQuick.phjProductAttribute").remove(),phAppendContainerRequestQickView(),jQuery("#phContainerRequestQuickView").html(e.popup),jQuery("#phQuickViewPopup").modal(),0<t.load_chosen&&jQuery("select").chosen("destroy").chosen({disable_search_threshold:10,allow_single_deselect:!0}),phChangeAttributeType("ItemQuick"),0<t.quantity_input_spinner&&jQuery("input[name='quantity']:visible").TouchSpin({verticalbuttons:!0,verticalup:t.icon_spinner_verticalup,verticaldown:t.icon_spinner_verticaldown})):"changeprice"==t.type?jQuery(t.id_item).html(e.item):"changestock"==t.type&&(1==t.method&&(e.stock<1?(jQuery(t.product_add_to_cart_item).css("visibility","hidden"),jQuery(t.product_add_to_cart_item_icon).css("display","none")):(jQuery(t.product_add_to_cart_item).css("visibility","visible"),jQuery(t.product_add_to_cart_item_icon).css("display","block"))),jQuery(t.id_item).html(e.item))}function phDoRequestError(e,t){"cart"==t.type&&(1==t.pos&&(jQuery(".ph-pos-message-box").html(e.error),phPosManagePage()),2!=t.method&&jQuery(".phItemCartBox").html(e.error),2==t.method&&(phAppendContainerRequest(),jQuery("#phContainerRequest").html(e.popup),jQuery("#phAddToCartPopup").modal()),1==t.method&&1==t.view&&(startFullOverlay(1),setTimeout(function(){location.reload()},1)))}function phDoRequestMethods(e,t,o){return phRequest=jQuery.ajax({type:"POST",url:e,async:"false",cache:"false",data:t,dataType:"JSON",success:function(e){1==e.status?phDoRequestSuccess(e,o):0==e.status&&phDoRequestError(e,o)}}),!1}jQuery(document).ready(function(){jQuery(document).on("submit","form.phItemCartBoxForm",function(e){if("function"==typeof phDoSubmitFormAddToCart){e.preventDefault();var t=jQuery(this).serialize();phDoSubmitFormAddToCart(t)}}),jQuery(document).on("click","#ph-pc-pos-site form.phItemCartUpdateBoxForm button",function(e){if("function"==typeof phDoSubmitFormAddToCart){e.preventDefault();var t=jQuery(this).closest("form"),o=jQuery(this).val(),r=t.serialize()+"&action="+o;phDoSubmitFormUpdateCart(r)}})});