var phFilterNewUrlSet="",phFilterNewUrlRemove="",phFilterNewUrlSetPreviousParamWaiting=0,phFilterNewUrlRemovePreviousParamWaiting=0;function phReplaceAll(e,r,t){return t.replace(new RegExp(e,"gi"),r)}function phEscapeRegExp(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function phReplaceAll(e,r,t){return t.replace(new RegExp(phEscapeRegExp(e),"g"),r)}function phEncode(e){var r;return r=encodeURIComponent(e),r=phReplaceAll("%5B","[",r),r=phReplaceAll("%5D","]",r),r=phReplaceAll("%2C",",",r),r=phReplaceAll("%3A",":",r)}function phArrayToString(e){var r;return r=phReplaceAll("[","(",e),r=phReplaceAll("]",")",r)}function phStringToArray(e){var r;return r=phReplaceAll("(","[",e),r=phReplaceAll(")","]",r)}function phCleanArray(e){for(var r=[],t=0;t<e.length;t++)e[t]&&r.push(e[t]);return r}function phCleanEmptyParams(e){return e.replace(/&?[^&?]+=(?=(?:&|$))/g,"")}function phCleanAloneQuestionMark(e){return"?&"==e&&(e="?"),"?"==e&&(e=""),e}function phFilterValue(e){var r;return r=phReplaceAll("<","",e),r=phReplaceAll(">","",r)}function phRemoveFilter(e,r,t,i,l,a,p,o){var n=Joomla.getOptions("phParamsPC");e=phArrayToString(e);var h,c=jQuery.param.querystring();c=phArrayToString(c);var m,u={},s=0;if(void 0!==(h=""!==phFilterNewUrlRemove||1==phFilterNewUrlRemovePreviousParamWaiting?jQuery.deparam.querystring(phFilterNewUrlRemove):jQuery.deparam.querystring(c)).start&&(u.start=0),void 0!==h.limitstart&&(u.limitstart=0),1==a)delete h[e],u=h,s=2;else if(void 0!==h[e]){var F=h[e],P=F.split(",");if(-1!==(P=phCleanArray(P)).indexOf(r)){var g=P.indexOf(r);-1<g&&P.splice(g,1),(F=P.join())?u[e]=F:(delete h[e],u=h,s=2)}}else delete h[e],u=h,s=2;if(1==t&&1!=l||1!=t)return m=i,document.location=m,1;if(m=location.search,""===phFilterNewUrlRemove&&1!=phFilterNewUrlRemovePreviousParamWaiting||(m=phFilterNewUrlRemove),m=phArrayToString(m),phFilterNewUrlRemove=jQuery.param.querystring(m,u,s),phFilterNewUrlRemove=phReplaceAll("%2C",",",phFilterNewUrlRemove),phFilterNewUrlRemove=phReplaceAll("%5B","[",phFilterNewUrlRemove),phFilterNewUrlRemove=phReplaceAll("%5D","]",phFilterNewUrlRemove),phFilterNewUrlRemove=phCleanAloneQuestionMark(phFilterNewUrlRemove=phStringToArray(phFilterNewUrlRemove=phReplaceAll("%3A",":",phFilterNewUrlRemove))),1==p){if((phFilterNewUrlRemovePreviousParamWaiting=1)==t&&1==n.ajaxSearchingFilteringItems)return 2}else{if(1==t&&1==n.ajaxSearchingFilteringItems)return phUpdatePageAndParts(phFilterNewUrlRemove,o),phFilterNewUrlRemove="",phFilterNewUrlRemovePreviousParamWaiting=0,2;document.location=phFilterNewUrlRemove,phFilterNewUrlRemove=""}return 1}function phSetFilter(e,r,t,i,l,a,p,o){var n=Joomla.getOptions("phParamsPC");r=phFilterValue(r),e=phArrayToString(e);var h,c=jQuery.param.querystring();c=phArrayToString(c);var m,u={};if(void 0!==(h=""!==phFilterNewUrlSet||1==phFilterNewUrlSetPreviousParamWaiting?(phFilterNewUrlSet=phArrayToString(phFilterNewUrlSet),jQuery.deparam.querystring(phFilterNewUrlSet)):jQuery.deparam.querystring(c)).start&&(u.start=0),void 0!==h.limitstart&&(u.limitstart=0),1==a)u[e]=r;else if(""!==r)if(void 0!==h[e]){var s=h[e],F=s.split(",");-1===(F=phCleanArray(F)).indexOf(r)&&(F.push(r),s=F.join()),u[e]=s}else u[e]=r;if(m=1==t&&1!=l||1!=t?i:location.search,""===phFilterNewUrlSet&&1!=phFilterNewUrlSetPreviousParamWaiting||(m=phFilterNewUrlSet),m=phArrayToString(m),phFilterNewUrlSet=jQuery.param.querystring(m,u,0),phFilterNewUrlSet=phReplaceAll("%2C",",",phFilterNewUrlSet),phFilterNewUrlSet=phReplaceAll("%2C",",",phFilterNewUrlSet),phFilterNewUrlSet=phReplaceAll("%5B","[",phFilterNewUrlSet),phFilterNewUrlSet=phReplaceAll("%5D","]",phFilterNewUrlSet),phFilterNewUrlSet=phCleanAloneQuestionMark(phFilterNewUrlSet=phCleanEmptyParams(phFilterNewUrlSet=phStringToArray(phFilterNewUrlSet=phReplaceAll("%3A",":",phFilterNewUrlSet)))),1==p){if((phFilterNewUrlSetPreviousParamWaiting=1)==t&&1==n.ajaxSearchingFilteringItems)return 2}else{if(1==t&&1==n.ajaxSearchingFilteringItems)return phUpdatePageAndParts(phFilterNewUrlSet,o),phFilterNewUrlSet="",phFilterNewUrlSetPreviousParamWaiting=0,2;document.location=phFilterNewUrlSet,phFilterNewUrlSet=""}return 1}function phChangeFilter(e,r,t,i,l,a,p){var o=Joomla.getOptions("phVarsModPhocacartFilter"),n=Joomla.getOptions("phParamsModPhocacartFilter"),h=o.isItemsView,c=o.isSef,m=o.urlItemsView,u=o.urlItemsViewWithoutParams,s=1;if("text"==i)s=(1==t?phSetFilter:phRemoveFilter)(e,r,h,m,1,l,a,p);else if("category"==i)if(m=u,1==n.removeParametersCat)document.location=m;else{var F=jQuery.param.querystring();1==h?1==c?document.location=jQuery.param.querystring(m,F,2):phRemoveFilter(e,r,h,m,1,l,a,p):document.location=m}else s=(t.checked?phSetFilter:phRemoveFilter)(e,r,h,m,1,l,a,p);startFullOverlay(s)}function phChangeSearch(e,r,t){var i=Joomla.getOptions("phVarsModPhocacartSearch"),l=Joomla.getOptions("phParamsModPhocacartSearch"),a=(Joomla.getOptions("phParamsPC"),i.isItemsView),p=i.urlItemsView,o=i.urlItemsViewWithoutParams,n=1,h=a;n=1==t?(1==l.searchOptions?0<jQuery("#phSearchBoxSearchAllProducts:checked").length&&(p=o,h=0):h=0,phSetFilter(e,r,a,p,h,1,0,2)):phRemoveFilter(e,r,a,p,h,1,0,2),startFullOverlay(n)}function phPriceFilterRange(){var i=Joomla.getOptions("phParamsPC"),l=Joomla.getOptions("phLangPC");"function"==typeof jQuery("#phPriceFilterRange").slider&&jQuery("#phPriceFilterRange").slider({range:!0,min:i.filterPriceMin,max:i.filterPriceMax,values:[i.filterPriceFrom,i.filterPriceTo],slide:function(e,r){jQuery("#phPriceFromTopricefrom").val(r.values[0]),jQuery("#phPriceFromTopriceto").val(r.values[1]),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(r.values[0])+" - "+phGetPriceFormat(r.values[1]))}}),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(i.filterPriceFrom)+" - "+phGetPriceFormat(i.filterPriceTo)),jQuery("#phPriceFromTopricefrom").on("change",function(e){var r=jQuery("#phPriceFromTopricefrom").val(),t=jQuery("#phPriceFromTopriceto").val();""==t&&(t=i.filterPriceMax),""==r&&(r=i.filterPriceMin),Number(t)<Number(r)&&(t=r,jQuery("#phPriceFromTopriceto").val(t)),"function"==typeof jQuery("#phPriceFilterRange").slider&&jQuery("#phPriceFilterRange").slider({values:[r,t]}),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(r)+" - "+phGetPriceFormat(t))}),jQuery("#phPriceFromTopriceto").on("change",function(e){var r=jQuery("#phPriceFromTopricefrom").val(),t=jQuery("#phPriceFromTopriceto").val();""==t&&(t=i.filterPriceMax),""==r&&(r=i.filterPriceMin),Number(t)<Number(r)&&(t=r,jQuery("#phPriceFromTopriceto").val(t)),"function"==typeof jQuery("#phPriceFilterRange").slider&&jQuery("#phPriceFilterRange").slider({values:[r,t]}),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(r)+" - "+phGetPriceFormat(t))})}function phClearField(e){jQuery(e).val("")}jQuery(document).ready(function(){jQuery(".collapse").on("shown.bs.collapse",function(){jQuery(this).parent().find(".glyphicon-triangle-right").removeClass("glyphicon-triangle-right").addClass("glyphicon-triangle-bottom"),jQuery(this).parent().find(".fa-caret-right").removeClass("fa-caret-right").addClass("fa-caret-down")}).on("hidden.bs.collapse",function(){jQuery(this).parent().find(".glyphicon-triangle-bottom").removeClass("glyphicon-triangle-bottom").addClass("glyphicon-triangle-right"),jQuery(this).parent().find(".fa-caret-down").removeClass("fa-caret-down").addClass("fa-caret-right")}),phPriceFilterRange()});