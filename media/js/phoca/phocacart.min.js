function phRemoveUrlParameter(e,a){var r=a.split("?")[0],t=[],i=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==i){for(var o=(t=i.split("&")).length-1;0<=o;--o)paramV=t[o].split("=")[0],paramV===e&&t.splice(o,1);r=r+"?"+t.join("&")}return r}function startOverlay(e){jQuery('<div id="phOverlayDiv"><div id="phLoaderFull"> </div></div>').appendTo(e),jQuery("#phOverlayDiv").fadeIn().css("display","block")}function startFullOverlay(e){2!=e&&(jQuery('<div id="phOverlay"><div id="phLoaderFull"> </div></div>').appendTo(document.body),jQuery("#phOverlay").fadeIn().css("display","block"))}function stopOverlay(){jQuery("#phOverlay").fadeIn().css("display","none")}function phRemoveParamFromUrl(e,a){var r=a.split("?")[0],t=[],i=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==i){for(var o=(t=i.split("&")).length-1;0<=o;--o)t[o].split("=")[0]===e&&t.splice(o,1);r=r+"?"+t.join("&")}return r}function phUpdatePageAndParts(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsModPhocacartSearch"),i="/";if("undefined"!=r.basePath&&""!=r.basePath||(i=""),window.history.pushState({},"",e),""!=e){var o=phRemoveParamFromUrl("format",e);o=e+"&format=raw"}else o="?format=raw";var n=phRemoveParamFromUrl("option",o);n=phRemoveParamFromUrl("view",n),n=(n=phRemoveParamFromUrl("module",n)).substring(n.indexOf("?")+1);var p=r.basePath+i+"index.php?option=com_ajax&module=phocacart_search",s=r.basePath+i+"index.php?option=com_ajax&module=phocacart_filter";0==n.indexOf("?")?(p=p+"&"+n.substr(1),s=s+"&"+n.substr(1)):0==n.indexOf("&")?(p+=n,s+=n):(p=p+"&"+n,s=s+"&"+n),void 0!==t&&1==r.mod_phocacart_search&&1==t.displayActiveParameters&&phRenderPagePart({},"phSearchActiveTags",p),void 0!==r&&1==r.mod_phocacart_filter&&2==a&&phRenderPagePart({},"phFilterBox",s),phRenderPage({},o)}function phRenderPage(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsPC"),i="#"+r.renderPageOutput,o=r.renderPageUrl,n=r.isPOS,p=t.loadChosen;return startOverlay(i),o=void 0!==a?a:o,phRequest=jQuery.ajax({type:"POST",url:o,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){jQuery(i).html(e),1==n&&phPosManagePage(),1==p&&jQuery("select").chosen("destroy").chosen({disable_search_threshold:10,allow_single_deselect:!0}),"function"==typeof phChangeAttributeType&&phChangeAttributeType(),"undefined"!=typeof phLazyLoadInstance&&phLazyLoadInstance&&phLazyLoadInstance.update(),stopOverlay()}}),!1}function phRenderPagePart(e,a,r){phRequest=jQuery.ajax({type:"POST",url:r,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){a="#"+a,jQuery(a).html(e)}})}function phDisableRequirement(){var e=Joomla.getOptions("phParamsPC").loadChosen,a=jQuery("#jform_country_phs"),r=jQuery("#jform_region_phs");jQuery("#phCheckoutBillingSameAsShipping").prop("checked")?(jQuery(".phShippingFormFields").prop("readonly",!0),a.attr("disabled","disabled"),r.attr("disabled","disabled"),jQuery(".phShippingFormFieldsRequired").removeAttr("aria-required"),jQuery(".phShippingFormFieldsRequired").removeAttr("required")):(jQuery(".phShippingFormFieldsRequired").prop("aria-required","true"),jQuery(".phShippingFormFieldsRequired").prop("required","true"),jQuery(".phShippingFormFields").removeAttr("readonly"),a.removeAttr("disabled"),r.removeAttr("disabled")),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated"))}function phRenderBillingAndShippingSame(){phDisableRequirement(),jQuery("#phCheckoutBillingSameAsShipping").on("click",function(){phDisableRequirement()})}function phEventChangeFormPagination(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsPC"),i=jQuery(a).val(),o="#"+jQuery(a).attr("id")+"top";jQuery(o).val(i);var n=jQuery(e).attr("name");if(1==t.ajaxPaginationCategory||1==r.isPOS){var p=window.location.href;phRenderPage(jQuery(e).serialize(),p)}else if("phitemstopboxform"==n){p=window.location.href;phRenderPage(jQuery(e).serialize(),p)}else e.submit(),startFullOverlay(1)}function phNumberFormat(e,a,r,t){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i,o,n,p=isFinite(+e)?+e:0,s=isFinite(+a)?Math.abs(a):0,h=void 0===t?",":t,l=void 0===r?".":r,d="";return 3<(d=(s?(i=p,o=s,n=Math.pow(10,o),""+(Math.round(i*n)/n).toFixed(o)):""+Math.round(p)).split("."))[0].length&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,h)),(d[1]||"").length<s&&(d[1]=d[1]||"",d[1]+=new Array(s-d[1].length+1).join("0")),d.join(l)}jQuery(document).ready(function(){jQuery(".phItemSwitchLayoutType").on("click",function(e){var a=jQuery(this).data("layouttype"),r=jQuery(this).closest("form").serialize()+"&layouttype="+a;jQuery(".phItemSwitchLayoutType").removeClass("active"),jQuery(".phItemSwitchLayoutType."+a).addClass("active"),phRenderPage(r,window.location.href)}),jQuery(document).on("click",".phPaginationBox .pagination li a",function(e){var a=Joomla.getOptions("phVarsPC");if(1==Joomla.getOptions("phParamsPC").ajaxPaginationCategory||1==a.isPOS){var r=jQuery(this).attr("href");phRenderPage(jQuery(this).closest("form").serialize(),r),r=phRemoveUrlParameter("format",r),r=phRemoveUrlParameter("start",r),window.history.pushState("","",r),e.preventDefault()}}),phRenderBillingAndShippingSame()});